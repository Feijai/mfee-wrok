<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./myjs.js"></script>
</head>
<div id="abc123"></div>
<body>
    <script type="text/javascript">
        const app = new PIXI.Application();
        document.getElementById("abc123").appendChild(app.view);

        app.stage.interactive = true;

        const bg = PIXI.Sprite.from('./chips/50.png');
        bg.anchor.set(0.5);

        bg.x = app.screen.width / 2;
        bg.y = app.screen.height / 2;

        const filter = new PIXI.filters.ColorMatrixFilter();
// 愛心顯示在畫布的位置
        const container = new PIXI.Container();
        container.x = app.screen.width / 2;
        container.y = app.screen.height / 2;

        const bgFront = PIXI.Sprite.from('./chips/5000.png');
        bgFront.anchor.set(4);

        container.addChild(bgFront);

        const light2 = PIXI.Sprite.from('./chips/500.png');
        light2.anchor.set(0.5);
        container.addChild(light2);

        const light1 = PIXI.Sprite.from('./chips/5000.png');
        light1.anchor.set(0.5);
        container.addChild(light1);

        const panda = PIXI.Sprite.from('../sdd/img/heart.png');
        panda.anchor.set(0.5);

        container.addChild(panda);

        app.stage.addChild(container);

        app.stage.filters = [filter];

        let count = 0;
        let enabled = true;

        app.stage.on('pointertap', () => {
            enabled = !enabled;
            app.stage.filters = enabled ? [filter] : null;
        });
// 修改文字區域
        const help = new PIXI.Text('點擊切換閃爍模式', {
            fontFamily: 'Arial',
            fontSize: 40,
            fontWeight: 'bold',
            fill: 'white',
        });
        // 修改文字對齊高度
        help.y = app.screen.height - 50;
        // 修改文字對齊寬度
        help.x = 240;

        app.stage.addChild(help);

        app.ticker.add((delta) => {
            bg.rotation += 0.01;
            bgFront.rotation -= 0.01;
            light1.rotation += 0.02;
            light2.rotation += 0.01;

            panda.scale.x = 1 + Math.sin(count) * 0.04;
            panda.scale.y = 1 + Math.cos(count) * 0.04;

            count += 0.1;

            const {
                matrix
            } = filter;

            matrix[1] = Math.sin(count) * 3;
            matrix[2] = Math.cos(count);
            matrix[3] = Math.cos(count) * 1.5;
            matrix[4] = Math.sin(count / 3) * 2;
            matrix[5] = Math.sin(count / 2);
            matrix[6] = Math.sin(count / 4);
        });
    </script>

</body>

</html>